DROP DATABASE IF EXISTS peli;
CREATE DATABASE peli;
USE peli;
DROP USER IF EXISTS "dbuser"@"localhost";
CREATE USER "dbuser"@"localhost" IDENTIFIED BY "dbpass";
GRANT SELECT, INSERT, UPDATE, DELETE ON peli.* TO "dbuser"@"localhost";

CREATE TABLE MAASTORUUTU (
   MAASTORUUTUID VARCHAR(24) NOT NULL,
	Description VARCHAR(120),
	Details VARCHAR(255),
	PRIMARY KEY (MAASTORUUTUID)
);
CREATE TABLE SUUNTA (
	SUUNTAID VARCHAR(10) NOT NULL,
	Description VARCHAR(120),
	PRIMARY KEY (SUUNTAID)
);
CREATE TABLE ESINETYYPPI (
  TyyppiID INT NOT NULL,
  Kuntopisteet INT,
  Taisteluvoima INT,
  EsineNimi VARCHAR(24) NOT NULL,
  Parannusvoima INT,
  PRIMARY KEY (TyyppiID)
);
CREATE TABLE MONSTERTYYPPI (
  MonstertyyppiID INT NOT NULL,
  Kuntopisteet INT,
  Taisteluvoima INT,
  Nimi VARCHAR(24) NOT NULL,
  PRIMARY KEY (MonstertyyppiID)
);
CREATE TABLE PELIHAHMO (
  PelihahmoID INT NULL,
  Nimi VARCHAR(20),
  Pelitaso INT,
  Varallisuus INT,
  MAASTORUUTU VARCHAR(10),
  Kuntopisteet INT,
  Taisteluvoima INT,
  PRIMARY KEY (PelihahmoID),
  FOREIGN KEY (MAASTORUUTU) REFERENCES MAASTORUUTU(MAASTORUUTUID)
);
CREATE TABLE ESINEET (
  EsineID INT NOT NULL,
  TyyppiID INT NOT NULL,
  MAASTORUUTU VARCHAR(10),
  PelihahmoID INT,
  PRIMARY KEY (EsineID),
  FOREIGN KEY (TyyppiID) REFERENCES ESINETYYPPI(TyyppiID),
  FOREIGN KEY (MAASTORUUTU) REFERENCES MAASTORUUTU(MAASTORUUTUID),
  FOREIGN KEY (PelihahmoID) REFERENCES PELIHAHMO(PelihahmoID)
);
CREATE TABLE SIIRTO (
	SIIRTOID VARCHAR(10) NOT NULL,
	Source VARCHAR(10),
	Destination VARCHAR(10),
	SUUNTA VARCHAR(10),
	Locked BIT,
	Locknote VARCHAR(40),
	PRIMARY KEY (SIIRTOID),
	FOREIGN KEY (Source) REFERENCES MAASTORUUTU(MAASTORUUTUID),
	FOREIGN KEY (Destination) REFERENCES MAASTORUUTU(MAASTORUUTUID),
	FOREIGN KEY (SUUNTA) REFERENCES SUUNTA(SUUNTAID)
);
CREATE TABLE MONSTER (
  MONSTERID INT NOT NULL,
  MAASTORUUTU VARCHAR(10),
  MonstertyyppiID INT NOT NULL,
  PRIMARY KEY (MONSTERID),
  FOREIGN KEY (MAASTORUUTU) REFERENCES MAASTORUUTU(MAASTORUUTUID),
  FOREIGN KEY (MonstertyyppiID) REFERENCES MONSTERTYYPPI(MonstertyyppiID)
);
CREATE TABLE NPC (
	NPCID VARCHAR(12) NOT NULL,
	DIALOGUE VARCHAR(255),
	MAASTORUUTU VARCHAR(10),
	PRIMARY KEY (NPCID),
	FOREIGN KEY (MAASTORUUTU) REFERENCES MAASTORUUTU(MAASTORUUTUID)
);

INSERT INTO SUUNTA VALUES ('N', 'North');
INSERT INTO SUUNTA VALUES ('S', 'South');
INSERT INTO SUUNTA VALUES ('E', 'East');
INSERT INTO SUUNTA VALUES ('W', 'West');

INSERT INTO MAASTORUUTU VALUES ('PLAYER', 'Player', '');
INSERT INTO MAASTORUUTU VALUES ('BEGIN', 'Welcome to the town of Riverwood', 'I should speak with the locals for more information about the Trial.');
INSERT INTO MAASTORUUTU VALUES ('START', 'You entered the Warriors Trial.', 'The door locks behind you.');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY', 'You are in an empty hallway.', '');
INSERT INTO MAASTORUUTU VALUES ('CREDITS', 'Credit to Jeremias Korhonen, Janne Leskel√§ and Karl Lepmets.', ''); 
INSERT INTO MAASTORUUTU VALUES ('ROOM81', 'A strong gust of wind blows through you.', 'This is where it begins...');
INSERT INTO MAASTORUUTU VALUES ('ROOM71', 'Spiderweb everywhere.', 'Im not alone');
INSERT INTO MAASTORUUTU VALUES ('ROOM51', 'You are in a dimly lit room.', 'To the west you see a door.');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY52', 'You are in an empty hallway.', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM54', '', '');
INSERT INTO MAASTORUUTU VALUES ('TRSROOM55', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY63', 'Who put these candles on?', 'Must be the right way.');
INSERT INTO MAASTORUUTU VALUES ('ROOM62', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM72', 'This is a dead end.', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY41', 'You are in an empty hallway', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM21', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY11', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY22', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY32', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY33', '', '');
INSERT INTO MAASTORUUTU VALUES ('LVROOM', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY24', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY13', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY15', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY16', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY17', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM18', '', '');
INSERT INTO MAASTORUUTU VALUES ('SHOP', '', '');
INSERT INTO MAASTORUUTU VALUES ('PASSAGE26', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM36', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY37', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM38', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY29', '', '');
INSERT INTO MAASTORUUTU VALUES ('PUZZLE28', '', '');
INSERT INTO MAASTORUUTU VALUES ('TRSROOM27', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM49', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM59', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY58', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM57', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY56', '', '');
INSERT INTO MAASTORUUTU VALUES ('RIDDLE46', '', '');
INSERT INTO MAASTORUUTU VALUES ('TRSROOM47', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY67', '', '');
INSERT INTO MAASTORUUTU VALUES ('PUZZLE77', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM78', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY76', '', '');
INSERT INTO MAASTORUUTU VALUES ('TRSROOM87', '', '');
INSERT INTO MAASTORUUTU VALUES ('TRSROOM97', '', '');
INSERT INTO MAASTORUUTU VALUES ('HALLWAY96', '', '');
INSERT INTO MAASTORUUTU VALUES ('ROOM95', '', '');
INSERT INTO MAASTORUUTU VALUES ('PUZZLE75', '', '');
INSERT INTO MAASTORUUTU VALUES ('BOSS', '', '');
INSERT INTO MAASTORUUTU VALUES ('END', '', '');

INSERT INTO SIIRTO VALUES('PS','BEGIN','START','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P1A','START','HALLWAY','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P1B','START','ROOM81','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('PCR','HALLWAY','CREDITS','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P2','ROOM81','ROOM71','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P3','ROOM71','ROOM51','W', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P4A','ROOM51','HALLWAY52','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P4B','ROOM51','HALLWAY41','W', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P5A','HALLWAY52','ROOM54','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P5B','HALLWAY52','ROOM62','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P6','ROOM54','TRSROOM55','N', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P7','HALLWAY41','ROOM21','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P8','ROOM21','HALLWAY11','W', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P9A','HALLWAY11','HALLWAY13','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P9B','HALLWAY11','HALLWAY13','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P10','HALLWAY22','HALLWAY32','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P11','HALLWAY32','HALLWAY33','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P12A','HALLWAY33','LVROOM','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P12B','HALLWAY33','HALLWAY24','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P13','HALLWAY33','LVROOM','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P14','HALLWAY13','HALLWAY15','N', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P15','HALLWAY24','HALLWAY15','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P16A','HALLWAY15','HALLWAY16','N', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P17B','HALLWAY16','PASSAGE26','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P18','HALLWAY16','HALLWAY17','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P19','HALLWAY17','ROOM18','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P20','ROOM18','SHOP','N', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P21','PASSAGE26','ROOM36','E', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P22','ROOM36','HALLWAY37','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P23','HALLWAY37','ROOM38','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P24A','ROOM38','HALLWAY29','N', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P24B','ROOM38','ROOM49','E', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P25','HALLWAY29','PUZZLE28','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P26','PUZZLE28','TRSROOM27','S', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P27','ROOM49','ROOM59','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P28','ROOM59','HALLWAY58','S', TRUE, "Blocked by the monster");
INSERT INTO SIIRTO VALUES('P29','HALLWAY58','ROOM57','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P30A','ROOM57','HALLWAY56','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P30B','ROOM57','HALLWAY67','E', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P31','HALLWAY56','RIDDLE46','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P32','RIDDLE46','TRSROOM47','N', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P33','HALLWAY67','PUZZLE77','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P34A','PUZZLE77','ROOM78','N', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P34B','PUZZLE77','TRSROOM87','E', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P34C','PUZZLE77','HALLWAY76','S', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P35','TRSROOM87','TRSROOM97','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P36','TRSROOM97','HALLWAY96','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P37','HALLWAY76','HALLWAY96','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P38','HALLWAY96','ROOM95','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P39','ROOM95','PUZZLE75','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P40','PUZZLE75','BOSS','S', TRUE, "Locked");
INSERT INTO SIIRTO VALUES('P41','BOSS','END','E', TRUE, "Blocked by the Boss");

INSERT INTO SIIRTO VALUES('P1AR','HALLWAY','START','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P1BR','ROOM81','START','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('PCRR','CREDITS','HALLWAY','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P2R','ROOM71','ROOM81','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P3R','ROOM51','ROOM71','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P4AR','HALLWAY52','ROOM51','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P4BR','HALLWAY41','ROOM51','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P5AR','ROOM54','HALLWAY52','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P5BR','ROOM62','HALLWAY52','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P6R','TRSROOM55','ROOM54','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P7R','ROOM21','HALLWAY41','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P8R','HALLWAY11','ROOM21','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P9AR','HALLWAY13','HALLWAY11','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P9BR','HALLWAY13','HALLWAY11','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P10R','HALLWAY32','HALLWAY22','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P11R','HALLWAY33','HALLWAY32','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P12AR','LVROOM','HALLWAY33','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P12BR','HALLWAY24','HALLWAY33','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P13R','LVROOM','HALLWAY33','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P14R','HALLWAY15','HALLWAY13','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P15R','HALLWAY15','HALLWAY24','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P16AR','HALLWAY16','HALLWAY15','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P17BR','PASSAGE26','HALLWAY16','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P18R','HALLWAY17','HALLWAY16','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P19R','ROOM18','HALLWAY17','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P20R','SHOP','ROOM18','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P21R','ROOM36','PASSAGE26','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P22R','HALLWAY37','ROOM36','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P23R','ROOM38','HALLWAY37','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P24AR','HALLWAY29','ROOM38','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P24BR','ROOM49','ROOM38','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P25R','PUZZLE28','HALLWAY29','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P26R','TRSROOM27','PUZZLE28','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P27R','ROOM59','ROOM49','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P28R','HALLWAY58','ROOM59','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P29R','ROOM57','HALLWAY58','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P30AR','HALLWAY56','ROOM57','N', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P30BR','HALLWAY67','ROOM57','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P31R','RIDDLE46','HALLWAY56','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P32R','TRSROOM47','RIDDLE46','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P33R','HALLWAY67','PUZZLE77','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P35R','TRSROOM87','TRSROOM97','E', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P36R','TRSROOM97','HALLWAY96','S', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P37R','HALLWAY96','HALLWAY76','W', FALSE, NULL);
INSERT INTO SIIRTO VALUES('P38R','ROOM95','HALLWAY96','N', FALSE, NULL);


INSERT INTO MONSTERTYYPPI VALUES (1, 25, 10, "Spider");
INSERT INTO MONSTERTYYPPI VALUES (2, 40, 15, "Goblin");
INSERT INTO MONSTERTYYPPI VALUES (3, 50, 18, "Bandit");
INSERT INTO MONSTERTYYPPI VALUES (4, 150, 25, "Champion");

INSERT INTO PELIHAHMO (PelihahmoID, Nimi, Pelitaso, Varallisuus, Kuntopisteet, Taisteluvoima, Maastoruutu)
VALUES(1, "Bob", 1, 20, 100, 15, NULL);

INSERT INTO MONSTER VALUES(2,'ROOM71', 1);
INSERT INTO MONSTER VALUES(3,'ROOM62', 1);
INSERT INTO MONSTER VALUES(4,'ROOM54', 2);
INSERT INTO MONSTER VALUES(5,'ROOM21', 2);
INSERT INTO MONSTER VALUES(6,'HALLWAY13', 2);
INSERT INTO MONSTER VALUES(7,'HALLWAY15', 2);
INSERT INTO MONSTER VALUES(8,'ROOM18', 2);
INSERT INTO MONSTER VALUES(9,'ROOM38', 2);
INSERT INTO MONSTER VALUES(10,'ROOM59', 3);
INSERT INTO MONSTER VALUES(12,'HALLWAY96', 4);

# WEAPONS 
INSERT INTO ESINETYYPPI VALUES(1, 0, 10, "Wooden Club", 0);
INSERT INTO ESINETYYPPI VALUES(2, 0, 15, "Iron Dagger", 0);
INSERT INTO ESINETYYPPI VALUES(3, 0, 25, "Steel Sword", 0);
INSERT INTO ESINETYYPPI VALUES(4, 0, 40, "Greatsword of Greatness", 0);
INSERT INTO ESINETYYPPI VALUES(5, 0, 75, "Hand of God", 0);
# ARMOR AND POTION
INSERT INTO ESINETYYPPI VALUES(6, 10, 0, "Wooden Shield", 0);
INSERT INTO ESINETYYPPI VALUES(7, 20, 0, "Iron Shield", 0);
INSERT INTO ESINETYYPPI VALUES(8, 35, 0, "Steel Shield", 0);
INSERT INTO ESINETYYPPI VALUES(9, 50, 0, "Full Plate Armour", 0);
INSERT INTO ESINETYYPPI VALUES(10, 100, 0, "Father's Enchanted Helm", 0);
INSERT INTO ESINETYYPPI VALUES(11, 0, 0, "Health Potion", 50);
INSERT INTO ESINETYYPPI VALUES(12, 0, 0, "Gold Coin", 0);
INSERT INTO ESINETYYPPI VALUES(13, 0, 0, "Key", 0);
INSERT INTO ESINETYYPPI VALUES(14, 0, 0, "Key", 0);

INSERT INTO ESINEET VALUES(1, 1, NULL, 1);
INSERT INTO ESINEET VALUES(2, 3, 'TRSROOM55', NULL);
INSERT INTO ESINEET VALUES(3, 6, 'HALLWAY32', NULL);
INSERT INTO ESINEET VALUES(4, 8, 'TRSROOM27', NULL);
INSERT INTO ESINEET VALUES(5, 10, 'TRSROOM47', NULL);
INSERT INTO ESINEET VALUES(6, 11, 'HALLWAY67', NULL);
INSERT INTO ESINEET VALUES(7, 5, 'TRSROOM87', NULL);
INSERT INTO ESINEET VALUES(8, 11, 'TRSROOM97', NULL);
INSERT INTO ESINEET VALUES(9, 13, 'ROOM81', NULL);
INSERT INTO ESINEET VALUES(10, 14, 'ROOM49', NULL);

INSERT INTO NPC VALUES('Ben',"Bend over ;)",'BEGIN');
INSERT INTO NPC VALUES('Ivan',"Ivan is me",'BEGIN');
INSERT INTO NPC VALUES('Tarzan',"oogabooga",'BEGIN');
INSERT INTO NPC VALUES('Jane',"I am Jane",'BEGIN');
INSERT INTO NPC VALUES('Jack',"I am Jack",'BEGIN');
INSERT INTO NPC VALUES('Shopkeeper', "I am shop",'SHOP');
